(function(){(function(d,b,a){var f,e,c;f=function(h,g){this._name=c;this.methods={foo:"bar"};return this.init(h,g)};c="navobile";e={cta:"#show-navigation",clickCatch:true,content:"#content",direction:"ltr",easing:"linear",changeDOM:false,copyBoundEvents:false,bindSwipe:false,bindDrag:false,openOffset:"80%",hammerOptions:{}};d.extend(f.prototype,{init:function(h,g){if(d("body").hasClass("navobile-bound")){return}d("body").addClass("navobile-bound");this.elem=h;this.$elem=d(this.elem);this.settings=d.extend({},e,g);this._defaults=e;this.$cta=d(this.settings.cta);this.$content=d(this.settings.content);this.$nav=this.settings.changeDOM?this.$elem.clone(this.settings.copyBoundEvents):this.$elem;this.createNewElems();if(this.settings.changeDOM){this.cloneDom()}this.$content.addClass("navobile-content navobile-content--"+this.settings.direction);this.attach();this.$nav.addClass("navobile-navigation navobile-navigation--"+this.settings.direction);return console.log("xD")},attach:function(){var h,g;this.$elem.data({open:false});this.$content.data({drag:false});g=d("html").hasClass("touch")?"touchend":"click";this.bindTap(g);if(this.settings.clickCatch){this.bindClickCatch(g)}if(typeof Hammer==="function"&&(this.settings.bindSwipe||this.settings.bindDrag)){h=Hammer(this.$content,this.settings.hammerOptions);if(this.settings.bindSwipe){this.bindSwipe()}if(this.settings.bindDrag){return this.bindDrag()}}},bindClickCatch:function(g){this.$content.on("scroll touchdrag touchmove",function(h){if(d("#navobile-click-catch").not(":visible")){return}h.preventDefault();return h.stopPropagation()});this.$content.parent().on("scroll touchdrag touchmove",function(h){if(d("#navobile-click-catch").not(":visible")){return}h.preventDefault();return h.stopPropagation()});d("#navobile-click-catch").on("scroll touchdrag touchmove",function(h){h.preventDefault();return h.stopPropagation()});return d("#navobile-click-catch").on(g,function(h){h.preventDefault();h.stopPropagation();if(!this.isMobile()){return false}this.slideContentIn();return false})},bindTap:function(g){return this.$cta.on(g,function(h){h.preventDefault();h.stopPropagation();if(!this.isMobile()&&!this.settings.clickCatch){return false}if($nav.data("open")&&!this.settings.clickCatch){this.slideContentIn()}else{this.slideContentOut()}return false})},bindSwipe:function(){var g,h;g=this.showOnRight()?"right":"left";h=this.showOnRight()?"left":"right";this.$content.on("swipe"+g,function(i){if(!this.isMobile()){return false}if(this.$content.data("drag")){this.removeInlineStyles();this.$content.data("drag",false)}this.slideContentIn();i.gesture.preventDefault();return i.stopPropagation()});return this.$content.on("swipe"+h,function(i){if(!this.isMobile()){return false}if(this.$content.data("drag")){this.removeInlineStyles();this.$content.data("drag",false)}this.slideContentOut();i.gesture.preventDefault();return i.stopPropagation()})},bindDrag:function(){var g,h;g=this.showOnRight()?"right":"left";h=this.showOnRight()?"left":"right";return this.$content.on("dragstart drag dragend release",function(i){var k,j;if(!this.isMobile()){return false}if(i.type==="release"){this.removeInlineStyles();return false}if(i.direction===g){if(!this.$content.hasClass("navobile-content-hidden")){return false}else{this.slideContentIn()}}if(i.direction===h){if(i.type==="dragend"){if(i.distance>60){this.slideContentOut()}else{this.slideContentIn()}this.removeInlineStyles();return false}if(i.type==="dragstart"){this.$content.data("drag",true)}k=i.position.x;j=Math.ceil(this.calculateTranslate(k));if(j>80||j<0){return false}if(d("html").hasClass("csstransforms3d")){return this.$content.css("transform","translate3d("+j+"%, 0, 0)")}else{if(d("html").hasClass("csstransforms")){return this.$content.css("transform","translateX("+j+"%)")}}}})},animateContent:function(h){var g;if(!this.canUseCssTransforms()){g=this.showOnRight()?{right:h}:{left:h};this.$content.animate(g,100,this.settings.easing,(function(i){return function(){var j;j=h==="0%"?"closed":"opened";return i.triggerEvent(j)}})(this))}else{if(h==="0%"){this.transitionEndEvents("closed");this.$content.removeClass("navobile-content-hidden")}else{this.transitionEndEvents("opened");this.$content.addClass("navobile-content-hidden")}}if(h==="0%"){this.$nav.removeClass("navobile-navigation-visible")}else{this.$nav.addClass("navobile-navigation-visible")}return this.removeInlineStyles()},slideContentIn:function(){this.triggerEvent("close");this.$nav.data("open",false);return this.animateContent("0%")},slideContentOut:function(){this.triggerEvent("open");this.$nav.data("open",true);return this.animateContent(this.settings.openOffset)},clickCatchHtml:function(){return'<div id="navobile-click-catch"></div>'},cloneDom:function(){var g;this.$elem.addClass("navobile-desktop-only");this.$nav.addClass("navobile-mobile-only");g=this.$nav.attr("id");this.$nav.attr("id","navobile-"+g);return this.$content.before(this.$nav)},createNewElems:function(){if(d("#navobile-device-pixel").length===0){d("body").append('<div id="navobile-device-pixel" />')}if(this.settings.clickCatch){return this.$content.prepend(this.clickCatchHtml())}},showOnRight:function(){return this.settings.direction==="rtl"},canUseCssTransforms:function(){return d("html").hasClass("csstransforms3d")||d("html").hasClass("csstransforms")},calculateTranslate:function(g){return(g/d(a).width())*100},isMobile:function(){return d("#navobile-device-pixel").width()>0},removeInlineStyles:function(){return this.$content.css("transform","")},triggerEvent:function(g){return d(a).trigger("navobile:"+g)},transitionEndEvents:function(g){return this.$content.one("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",(function(h){return function(){return h.triggerEvent(g)}})(this))}});d.fn[c]=function(g){this.each(function(){if(!d.data(this,"plugin_"+c)&&(typeof g==="object"||!g)){return d.data(this,"plugin_"+c,new f(this,g))}else{if(d.data(this,"plugin_"+c)){if(d.data(this,"plugin_"+c).methods[g]){return d.data(this,"plugin_"+c).methods[g].apply(this,Array.prototype.slice.call(argument,1))}else{return d.error("Method "+g+" does not exist on jQuery."+c)}}}});return this}})(jQuery,window,document)}).call(this);